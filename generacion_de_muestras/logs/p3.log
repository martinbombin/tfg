/PREP7

FX = 0
FY = 0

C*** Geometr√≠a del triangulo(mod) 
RECTNG,0,2*0.03125e-3,0,0.75e-3,
RECTNG,2*0.03125e-3,7*0.03125e-3,0.03125e-3,0.00075-0.03125e-3, 
RECTNG,7*0.03125e-3,12*0.03125e-3,2*3.125e-05,0.00075-2*0.03125e-3, 
RECTNG,12*0.03125e-3,17*0.03125e-3,3*3.125e-05,0.00075-3*0.03125e-3,
RECTNG,17*0.03125e-3,22*0.03125e-3,4*3.125e-05,0.00075-4*0.03125e-3,
RECTNG,22*0.03125e-3,27*0.03125e-3,5*3.125e-05,0.00075-5*0.03125e-3,
RECTNG,27*0.03125e-3,32*0.03125e-3,6*3.125e-05,0.00075-6*0.03125e-3,

FLST,2,7,5,ORDE,2   
FITEM,2,1   
FITEM,2,-7  
AGLUE,P51X

C*** Tipo de material   
ET,1,PLANE182   

C*** Atributos del material 
MPTEMP,,,,,,,,  
MPTEMP,1,0  
MPDATA,EX,1,,70e9   
MPDATA,PRXY,1,,0.3  

C*** Mallado
FLST,2,7,5,ORDE,2   
FITEM,2,7   
FITEM,2,-13 
AESIZE,P51X,0.03125e-3, 
MSHAPE,0,2D 
MSHKEY,0
!*  
FLST,5,7,5,ORDE,2   
FITEM,5,7   
FITEM,5,-13 
CM,_Y,AREA  
ASEL, , , ,P51X 
CM,_Y1,AREA 
CHKMSH,'AREA'   
CMSEL,S,_Y  
!*  
AMESH,_Y1   
!*  
CMDELE,_Y   
CMDELE,_Y1  
CMDELE,_Y2  
!*  

C*** Sujecion
FLST,2,1,4,ORDE,1   
FITEM,2,4   
!*  
/GO 
DL,P51X, ,ALL,  

C*** fuerza en x (mod)  
FLST,2,1,4,ORDE,1   
FITEM,2,26   
/GO 
!*  
SFL,P51X,PRES,-FX,   

C*** fuerza en y (mod)  
FLST,2,13,1,ORDE,3  
FITEM,2,2   
FITEM,2,7   
FITEM,2,-18 
!*  
/GO 
F,P51X,FY,FY 


FINISH  
/SOL
SOLVE

C*** Crea tabla de von misses
FINISH  
/POST1  
SET, FIRST
AVPRIN,0, , 
ETABLE, ,S,EQV
!*

C***
*VGET,von,ELEM, ,ETAB,SEQV, , ,2

*VGET,elem1,ELEM, ,NODE,1, , ,2 
*VGET,elem2,ELEM, ,NODE,2, , ,2 
*VGET,elem3,ELEM, ,NODE,3, , ,2 
*VGET,elem4,ELEM, ,NODE,4, , ,2 

*VGET,xcord,NODE, ,LOC,X, , ,2
*VGET,ycord,NODE, ,LOC,Y, , ,2

*CREATE,ansuitmp

*CFOPEN,'von','txt',' ' 
*VWRITE,von(1,1), , , , , , , , ,   
(E16.10)
*CFCLOS 

*CFOPEN,'elements','txt',' '
*VWRITE,elem1(1,1), elem2(1,1), elem3(1,1), elem4(1,1), , , , , ,   
(F10.0,' ',F10.0,' ',F10.0,' ',F10.0)   
*CFCLOS 

*CFOPEN,'nodes','txt',' '
*VWRITE, xcord(1,1), ycord(1,1), , , , , , , ,   
(E16.10,' ',E16.10)
*CFCLOS 

*END
/INPUT,ansuitmp 
!*  
C*** ! /EXIT,ALL
